---
title: Test  # 글 제목
date: 2026-01-26 00:00:00 +0900 # 작성 시간
categories: [web3, DEX] # 카테고리
tags: [web3, uniswap]     # 태그
---

# Hello this is a Test

## CEX로 구성된 이더델타는 오더북 형태로 거래를 온체인에서 거래가 되도록 만들었음.
그러나 단점이 너무 많음
1. 매수, 매도 거래 만들고, 취소하는데 많은 가스 소모
2. 확장성이 낮아 UX가 현저히 낮았음.
3. 유동성이 너무나도 부족해 거래가 힘들었음.


## Uniswap에는 CPMM을 활용해 거래를 자동화 시켰음
AMM을 구성하는 주요 요소로는 가격 결정 알고리즘, 유동성 공급자, 토큰 페어, 트레이더가 있다.

- 가격 결정 알고리즘 : $x*y=k$ 수식을 통해 k 값이 일정하게 유지되도록 $x, y$ 값을 변화 시켜 가격을 결정함.
- 토큰 페어 : 거래되는 토큰 쌍으로 ETH/DAI 같이 2개의 토큰이 존재해 Pool을 만들게 됩니다.
- 유동성 공급자 : 풀에 두 토큰의 유동성을 공급해 거래하는 주체를 의미합니다.
- 트레이더 : 풀에서 두 토큰을 거래하는 주체입니다. 유동성 공급자가 조성한 유동성을 바탕으로 거래가 가능하다.

### 유동성 공급자란?
유동성을 공급하는 주체로 공급하기 위해 토큰 페어 2가지 토큰을 한 번에 제공함으로써 가능하다. 이렇게 공급을 한다면, ERC20 토큰인 LP 토큰이 지급되며 이를 통해 수수료를 얻을 수 있다.

어떻게 수수료를 얻지?

### CPMM에서 거래는 어떻게 이루어지나?
CPMM은 유동성 크기에 따라 슬리피지가 존재할 수 있다.
예를 들어
```
ETH(x) : 100
DAI(y) : 1,000
k : 100,000
1 ETH : 10 DAI (현재 가격)
```
이런 풀이 있을때는 1000 DAI을 넣으면 50 DAI를 얻게 되며 남은 풀은 아래처럼 변한다.\
우리가 처음에 생각해보면 1:10이면 100 ETH를 얻어야하지만, 유동성이 작아 **슬리피지**가 발생했다.
```
ETH(x) : 50
DAI(y) : 2,000
k : 100,000
1 ETH : 40 DAI (변한 가격)
```

그렇지만 유동성 크기를 100배 키워보면, 
```
ETH(x) : 10,000
DAI(y) : 100,000
k : 1,000,000,000
1 ETH : 10 DAI (현재 가격)
```
1000 DAI를 넣으면 99.009901 ETH가 나오게 된다. 변화된 풀을 보면 아래처럼 변한다.
```
ETH(x) : 9900.99009901
DAI(y) : 101,000
k : 1,000,000,000
1 ETH : 10 DAI (현재 가격)
```

이렇게 유동성이 높을때는 약 0.0001 정도의 슬리피지가 존재하는것이다.

차후에 uniswap은 V3에 도입된 집중화된 유동성(Concentrated Liquidity)을 통해 슬리피지 문제를 유동성의 규모가 아닌 다른 방식으로 해결하려는 시도를 하고 있습니다.

### Gas Fee
AMM 모델은 매우 많고 이를 활용해 만들어진 DEX도 많았지만, 대부분의 문제는 가스 수수료이다. Uniswap은 AMM을 가장 잘 활용하였고 가스 수수료를 낮춰 일반 사용자들이 부담을 줄여줌으로써 성공할 수 있었다.


### Uniswap V2에서 추가된 기능
1. ERC20 Trade\
V1에는 Native ETH만 거래가 가능해서 DAI/USDC 거래를 위해서는 반드시 ETH로 환전하는 과정을 거쳐야 했다. 그러나 V2에서 ERC 20 페어 풀을 제공함으로써 ETH를 거치지 않아도 되게 되었다.\
또한, V2에서는 Wrraped ETH(ERC20)을 사용하게 바뀌었다.

2. Flash Swap\
Flash Loan과 유사한 기능인 Flash Swap이 가능하게 되었다.\
토큰 잔액이 없더라도 원하는 만큼의 토큰을 빌려 한 트랜잭션 안에서 사용한뒤, 수수료를 포함해 상환을 할 수 있는 기능이다.

3. 거버넌스 토큰인 Uni 토큰을 발행하여 이를 통해 거래 수수료의 일부를 UNI 토큰 보유자에게 지급하는 기능을 추가했다.

## Uniswap V3에서 추가된 기능
- 집중화된 유동성(Concentrated Liquidity)\
- 높은 자본 효율성(Higher Capital Efficiency)
- 유효한 유동성(Active Liquidity)
- 고유한 유동성(Non-Fungible Liquidity)
- 유연한 수수료 체계(Flexible Fees)
- 라이센스 도입(License)

### Concentrated Liquidity

### Non-Fungible Liquidity
V2까지는 ERC20 토큰인 LP 토큰을 지급했지만, V3부터는 ERC721 NFT를 제공해준다.

### Flexible Fees
기존에는 0.3%로 일정했지만, V3부터는 다르다.\
일반적인 경우에서는 0.3% 이고, STABLE 코인 페어는 0.05%를 제공해주고 유동성이 부족한 곳에서는 1%를 지급해준다.

### License
블록체인은 오픈소스 정신에 기반하여 Defi인 유니스왑도 오픈소스로 진행되어 왔습니다. 그러나 스시스왑에서 유니스왑 코드를 그대로 이용해 뱀파이어 어택이 일어난 사건들을 고려하여 Business Source Licence를 도입했다.\
블록체인 커뮤니티는 반발이 있었지만, UNI 홀더들의 찬성으로 정당성을 얻게 되었다.



### References
https://medium.com/@aiden.p/uniswap-series-1-%EC%9C%A0%EB%8B%88%EC%8A%A4%EC%99%91-%EC%9D%B4%ED%95%B4%ED%95%98%EA%B8%B0-e321446623c7

